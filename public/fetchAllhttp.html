<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
       
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <title>Organizer's Tournaments</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous" />
<!-- for bootstrap css -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<!-- for bootstrap js -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
  integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
  crossorigin="anonymous" referrerpolicy="no-referrer" /><!--  for jQuery -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
  integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
  crossorigin="anonymous" referrerpolicy="no-referrer" />
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function(){
            $("#modebtn").click(function () {

                if ($("#darkmode").hasClass("fa-flip-horizontal")) {
                    $("#darkmode").removeClass("fa-flip-horizontal");
                    $("#darkmode").addClass("fa-flip-vertical");
                    $("#darkmode").css("color", "white");
                    $("#NAV").css("box-shadow", "3px 3px 20px rgba(255, 255, 255, 0.5)");
                    $("#NAV").css("background-color", "black");
                    $("#NAVul").css("background-color", "black");
                    $("#jersify").removeClass("shine-text");
                    $("#jersify").addClass("shine-text2");
                    $("#CONTAINER").css("background-color", "black");
                    $("#BODY").css("background-color", "black");
                    
                    $("#TABLE th").css("background-color", "black");
                    $("#CCol h2").css("color", "white");
                    $("#CONTAINER h3").css("color", "white");
                    $("#CONTAINER label").css("color", "white");
                    $("#TABLE th").css("color", "white");
                    $("#profbg").css("background-color", "black");
                    $("#HEAD").css("color", "white");
                    $("#TABLE td").css("background-color", "black");
                    $("#TABLE td").css("color", "white");
                    $("#TABLE tr").css("background-color", "black");
                    $("#TABLE tr").css("color", "white");
                    
                }
                else if($("#darkmode").hasClass("fa-flip-vertical")){
                    $("#darkmode").removeClass("fa-flip-vertical");
                    $("#darkmode").addClass("fa-flip-horizontal");
                    $("#darkmode").css("color", "black");
                    $("#NAV").css("box-shadow", "3px 3px 20px rgba(0, 0, 0, 0.3)");
                    $("#NAV").css("background-color", "white");
                    $("#NAVul").css("background-color", "white");
                    $("#jersify").removeClass("shine-text2");
                    $("#jersify").addClass("shine-text");
                    $("#CONTAINER").css("background-color", "white");
                    $("#BODY").css("background-color", "white");
                    $("#CONTAINER h3").css("color", "black");
                    $("#profbg").css("background-color", "white");
                    $("#HEAD").css("color", "black");
                    $("#TABLE th").css("background-color", "white");
                     $("#TABLE td").css("background-color", "white");
                     $("#TABLE tr").css("background-color", "white");
                    $("#CCol h2").css("color", "black");
                    $("#CONTAINER label").css("color", "black");
                    $("#TABLE th").css("color", "black");
                    $("#TABLE tr").css("color", "black");
                    $("#TABLE td").css("color", "black");
                    
                    
                    

                }
 })
        })
        function refreshpage(){
            location.reload();
        }

       var mymodule= angular.module("kuchModule",[]);
      
      mymodule.controller("kuchController",function($scope,$http)
      {

        $scope.jsonArray=[];
        $scope.emailid="";
        $scope.searchedOnce= false;

        $scope.doFetchAll=function(){
            if(!$scope.emailid){
                alert("please enter your Email id");
                return;
            }
        
       
            var url="/Do-Fetch-TournamentsByEmailid?emailid="+ $scope.emailid;
            $http.get(url).then(allGoodFx,someBadFx);
            function allGoodFx(response)
            {
                
                $scope.jsonArray=response.data;
                $scope.searchedOnce=true;
                let L=$scope.jsonArray.length;
                //alert($scope.jsonArray[0].doe);
                for(i=0;i<L;i++){
                 $scope.jsonArray[i].doe=$scope.jsonArray[i].doe.split("T");
                 $scope.jsonArray[i].doe= $scope.jsonArray[i].doe[0];
                }
                //alert(jsonArray);
            }

            function someBadFx(err)
            {
                alert("Fetch Error:"+JSON.stringify(err.data));
            }
        }
       //----------------------
       $scope.doDelete=function(rid)
       {
        
            var url="/delete-Tournaments?rid="+rid;
            
            $http.get(url).then(allGoodFx,someBadFx);
            function allGoodFx(response)
            {
               alert(response.data);//resp in string
                $scope.doFetchAll();
                


            }

            function someBadFx(response)
            {
                alert("Delete Error: "+JSON.stringify(response.data));
            }
       }

$scope.emailid=[{}];
          $scope.showUser= function()
          { const value = localStorage.getItem('activeUser');
             
             
            
            
            
             $scope.emailid=value;
            //  alert($scope.emailid);
          } 
       })
          
            
    </script>
        <style>
        .btnnn {
        transition: all 0.4s;
        background-color: #6e6e6e;
        
    }

    .btnnn:hover {
        transform: scale(1.1);
        background-color: rgb(0, 0, 0);
        color: rgb(255, 255, 255);
    }
    .shine-text {
        font-size: 3rem;
        font-weight: bold;
        position: relative;
        overflow: hidden;
        background: linear-gradient(90deg, #606060, rgb(34, 34, 34), #6e6e6e);
        background-size: 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shine 4s infinite ease-in-out;
    }



    @keyframes shine {
        0% {
            background-position: 200% 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    .shine-text2 {
        font-size: 3rem;
        font-weight: bold;
        position: relative;
        overflow: hidden;
        background: linear-gradient(90deg, #9d9d9d, rgb(196, 196, 196), #9f9f9f);
        background-size: 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shine 4s infinite ease-in-out;
    }


    @keyframes shine {
        0% {
            background-position: 200% 0;
        }

        100% {
            background-position: -200% 0;
        }
    }
    </style>

</head>
<body ng-app="kuchModule" ng-controller="kuchController" ng-init="showUser(); doFetchAll();" id="BODY">
    <nav class="navbar navbar-expand-md " id="NAV"
        style="box-shadow: 1px 1px 10px rgb(102, 102, 102);background-color: #ffffff; ">
        <div class="container-fluid ">
            <div class="me-4"
                style="padding-left: 10px;padding-right: 10px; width: fit-content;height: fit-content;border-radius: 20px;">
                <h1 style="margin-top: 10px;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"
                    class="fs-1 shine-text" id="jersify">Jersify</h1>
            </div>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <ul class="navbar-nav " id="NAVul">



                    <li class="nav-link"> <a class="btn btnnn nav-link me-3 "
                            style="border-radius: 30px;float: left;padding-left: 15px;padding-right: 15px;"
                            aria-current="page" href="/">Home</a></li>
                    <li class="nav-link"><a href="/org-dash.html" class="btn btnnn nav-link me-3 "
                            style="float: left; border-radius: 30px;padding-left: 15px;padding-right: 15px;">Go Back</a>
                    </li>
                    <li class="nav-link" style="background-color: transparent;">
                        <button type="button" class="btn"
                            style=" line-height: 90%; padding: 10px; margin: auto; border-style: none; background-color: rgba(255, 255, 255, 0);"
                            id="modebtn">
                            <i class="fa-solid fa-toggle-on fa-flip-horizontal" id="darkmode"></i>
                            <!-- <i class="fa-solid fa-toggle-off" style="color: #000000;"></i> -->
                        </button>
                    </li>
                </ul>
            </div>
        </div>



        </div>
        </div>
    </nav>

    <div class="container mt-3" >
        <div class="card p-4" style="border-style: none; " id="CONTAINER">
            <h3 class="text-center fw-bold mb-4">
                Manage your Tournaments
            </h3>
            <div class="col md-6 offset-md-4" style="display: flex;"> 
                <input type="text"  class="form-control" placeholder="Enter your Email id" ng-model="emailid" id="fetchEmailid" style="width: 400px; margin-right: 20px;" ng-blur="doFetchAll();" >
                <a class="btn btnnn" href="organizer-Tournament.html" style="border-radius: 30px; background-color: rgb(53, 218, 255);color: black;">ADD<i class="fa-solid fa-plus" style="color: #000000;"></i></a>
            </div>
            <!-- <div class="cl-md-2">
                <button class="btn btn-primary" ng-click="doFetchAll()" style="margin: 10px ;">Fetch</button>
            </div> -->
        </div>
    </div>

<!-- ------------------------------------ -->
 <div ng-if="jsonArray.length > 0">
    <h5 class="text-center fw-semibold mb-3" id="HEAD">Posted Tournaments</h5>
    <div class="table-responsive" id="TABLE">
        <table class="table table-hover align-middle text-center" >
            <thead>
                <tr>
                    <th scope="col">Sr. No.</th>
                    <th scope="col">Event</th>
                    <th scope="col">Date</th>
                    <th scope="col">Time</th>
                    <th scope="col">City</th>
                    <th scope="col">Sports</th>
                    <th scope="col">Age</th>
                    <th scope="col">Fee</th>
                    <th scope="col">Prize</th>
                    <th scope="col">Contact</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody >
                <tr ng-repeat="obj in jsonArray" >
                    <th scope="row" >{{$index+1}}</th>
                    <td>{{obj.tourevent}}</td>
                    <td>{{obj.doe}}</td>
                    <td>{{obj.toe}}</td>
                    <td>{{obj.city}}</td>
                    <td>{{obj.sports}}</td>
                    <td>{{obj.minage}}-{{obj.maxage}}</td>
                    <td>{{obj.fee}}</td>
                    <td>{{obj.prize}}</td>
                    <td>{{obj.contact}}</td>
                    <td>
                        <button class="btn btn-danger " ng-click="doDelete(obj.rid)" >DELETE</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
 </div>
    <div class="text-center text-muted mt-4" ng-if="jsonArray.length==0 && searchedOnce">
        No tournaments found........
    </div>
    
    
    

   
</body>
</html>